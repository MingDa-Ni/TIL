# JS - DeepDive
## 2022-12-18 Sun

## 스코프

### 정의


### 종류

#### 전역 스코프

#### 지역 스코프


### 스코프 체인


#### 변수 검색


#### 함수 검색


### 함수 레벨 스코프

* 정의
  * var 키워드는 `함수의 코드 블록만을 지역 스코프로 인정`
  * 지역은 `함수 몸체 내부`를 의미한다.
  * 지역은 지역 스코프를 만든다.
    * `코드 블록이 아닌 함수에 의해서만 지역 스코프가 생성`
    * 코드 블록 안에서 의도치 않은 재할당이 생성될 수 있음
    ```javascript
    var i = 10;

    for (var i = 0; i<5; i++>){
      console.log(i);
    }

    console.log(i);
    ```

* 블록 레벨 스코프(block level scope)
  * C나 자바
  * `모든 코드 블록(if, for, while, try/catch 등)`이 지역 스코프를 만듦
  * ES6에 도입된 LET, CONST는 블록 레벨 스코프를 지원


### 렉시컬 스코프

* 상위 스코프 결정하는 법에 대한 고찰
  1. `함수를 어디서 호출`했는지
  2. `함수를 어디서 정의`했는지

* `호출` 기준
  * test 함수의 상위 스코프 
    * ex의 지역 스코프
    * 전역 스코프
  * `동적 스코프(dynamic scope)`
    * 호출 시점에 상위 스코프를 결정하기 때문
* `정의` 기준
  * test 함수의 상위 스코프
    * 전역 스코프
  * `렉시컬 스코프(lexical scope)` 또는 `정적 스코프(static scope)`
    * 함수 정의가 평가되는 시점에 상위 스코프가 결정되기 때문
    * 자바스크립트를 포함한 대부분의 언어는 렉시컬 스코프

#### 자바스크립트는 . . .
* 렉시컬 스코프
  * 함수를 어디서 정의했는지
    * 호출된 위치는 어떠한 영향도 주지 않는다.
  * `언제나 자신이 정의된 스코프`가 함수의 상위 스코프다.
  * 함수 정의로 실행되어 상성된 함수 객체는 `상위 스코프`를 기억한다.
    * 함수의 상위 스코프를 참조해야 할 필요가 있기 때문

```javascript
var a = 1;

function ex(){
  var a = 10;
  test();
}

function test() {
  console.log(a);
}
```
```javascript
ex();
test();
```
* 예제
  * test 함수는 전역에서 정의된 함수다.
    1. 전역 코드가 실행되기 전에 함수 객체를 생성
    2. 자신이 정의된 스코프(전역 스코프)를 기억
    3. 언제나 자신이 기억하고 있는 전역 스코프를 상위 스코프로 사용
  * 따라서 호출하면 전역 변수 a의 값인 1을 두 번 출력한다.