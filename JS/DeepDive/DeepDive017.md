# JS - DeepDive
## 2022-11-30 Wed

#### 문자열과 불변성

* 원시 값 저장
  * 먼저 확보해야 하는 메모리 공간의 크기를 결정
  * 문자열
    * 0개 이상의 문자(character)로 이루어짐
    * 1개의 문자는 2바이트의 메모리 공간에 저장
    * 문자열은 `몇 개의 문자로 이루어졌느냐에 따라 필요한 메모리 공간의 크기가 결정`
* JS
  * 개발자의 편의를 위해 `원시 타입인 문자열 타입` 제공
  ```
  var str = 'Hello';
  str str = 'world'
  ```
    1. 새로운 문자열 'world'를 메모리에 생성
    2. 식별자 str은 'world'를 가리킨다.
    3. 'Hello'와 'world'는 모두 메모리에 존재한다.
* 원리
  * `식별자 str은 문자열 'Hello'를 가리키고 있다가 'world'를 가리키도록 변경된다.`
* 불변성  
  ```
  var str = 'main';

  str[0] = 'M';
  ```
  ```
  console.log(str); // main
  ```
  * 문자열의 일부 문자를 변경해도 반영되지 않는다.
  * 따라서 `예기치 못한 변경으로부터 자유`롭다.
    * 변수의 재할당은 가능하다.
    * 기존 문자열 변경이 아니라 `새롭게 할당`하는 것이기 때문이다.
  * 데이터의 신뢰성을 보장한다. 

* 유사 배열 객체
  * 문자열은 `유사 배열 객체`면서 이터러블이므로 `배열과 유사하게` 접근할 수 있다.
  * 유사 배열 객체
    1. 인덱스로 프로퍼티에 접근
    2. length 프로퍼티를 보유
    3. 객체
  * 참고로 원시 값을 객체처럼 사용하면 `원시 값을 감싸는 래퍼 객체`로 자동 변환된다.

#### 값에 의한 전달

```
var score = 60;
var copy = score;

console.log(score === copy);

score = 100;

console.log(score === copy);
```
```
console.log(score); // 100
console.log(copy); // ?
```

* 예제
  * score 변수와 copy 변수의 값 80은 `다른 메모리 공간`에 저장된 별개의 값이다.
  * 따라서 score 변수의 값을 변경해도 copy 변수의 값에는 영향을 주지 않는다.

### 불확실과 이모저모
* 미확인
  * 사실 ECMAScript에 명확히 정의되어 있지 않다.
  * 실제 내부 동작 방식에 미묘한 차이가 있을 수 있다.
  * `파이썬`에서는. . .
    1. 두 변수가 같은 원시 값을 참조
    2. 어느 한쪽 변수에 재할당
    3. 비로소 새로운 메모리 공간에 재할당된 값을 저장하도록 동작
* 값에 의한 전달
  * ECMAScript 사양에는 등장하지 않는다.  
    * 값에 의한 전달은 `자바스크립트를 위한` 용어가 아니다.
  * `공유에 의한 전달(pass by sharing)`이라고 표현하는 경우도 있다.
  * 엄격하게 말하면 변수에는 값이 아닌 메모리 주소가 전달된다.
    * 변수와 같은 식별자는 `값이 아니라 메모리 주소`를 기억한다.
    * 식별자
        1. 값을 구별한다는 것은 `식별자가 기억하고 있는 메모리 주소`를 통해 
        2. `메모리 공간에 저장된 값`에 접근해 구별한다는 것
        3. 따라서, 식별자는 `메모리 주소에 붙인 이름`
    ```
    var a = 10;
    ```
      * 식별자 a는 메모리 공간에 저장된 숫자 값 10을 식별할 수 있다.
* 결론
  * `값에 의한 전달`도 사실은 값을 전달하는 것이 아니라 메모리 주소를 전달한다.
  * 단, 전달된 메모리 주소를 통해 메모리 공간에 접근하면 `값을 참조할 수 있다.`